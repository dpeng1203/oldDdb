(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fa81516"],{"16e3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"devicelist1"},[a("div",{staticClass:"devicelist-top flex-space"},[a("p",[e._v("机器编号")]),a("van-checkbox",{on:{click:e.chooseAll},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("van-checkbox-group",{on:{change:e.change},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[a("van-cell-group",e._l(e.list,function(t,n){return a("van-cell",{key:n,class:{hex:n%2===1},attrs:{title:"设备"+t.macEntity.macId},on:{click:function(a){return e.toggle(t.macEntity.macId)}}},[a("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{slot:"right-icon",name:t.macEntity.macId},slot:"right-icon"})],1)}),1)],1)],1),a("div",{staticClass:"share-bottom"},[a("van-button",{staticClass:"btn",attrs:{type:"primary",size:"large"},on:{click:e.toShare}},[e._v("确定分发")])],1)],1)},c=[],o=(a("a481"),a("75fc")),i=a("b562"),s=a("2241"),l=a("d399"),r={data:function(){return{active:"未分发",user:JSON.parse(window.localStorage.getItem("user")),list:[],loading:!1,finished:!1,params:{pageNum:1,aCode:JSON.parse(window.localStorage.getItem("user")).aCode,pageSize:20},result:[],checked:!1}},methods:{chooseAll:function(){console.log(this.checked),this.checked?this.result=[]:this.result=this.list.map(function(e,t){return e.macEntity.macId})},change:function(e){this.result.length===this.list.length?this.checked=!0:this.checked=!1},toggle:function(e){},formartTime:function(e){return e.substring(0,e.length-2)},tabNav:function(e){console.log(e)},onLoad:function(){var e=this;i["a"].getMacList(this.params).then(function(t){var a;console.log(t),(a=e.list).push.apply(a,Object(o["a"])(t.data)),e.loading=!1,t.data.length<e.params.pageSize&&(e.finished=!0),e.params.pageNum+=1}).catch(function(t){console.log(t),-6===t.resultCode?(localStorage.clear("agentToken"),s["a"].alert({message:t.msg}).then(function(){e.$router.replace({name:"login"})})):(l["a"].fail(t.msg),e.loading=!1,e.finished=!0)})},toShare:function(){var e=this,t={aCode:this.$route.query.aCode,macIdStr:this.result.join()};console.log(t),i["a"].updateMacListAgent(t).then(function(t){s["a"].alert({message:"操作成功"}).then(function(){e.$router.replace({name:"agent"})})}).catch(function(t){-6===t.resultCode?(localStorage.clear("agentToken"),s["a"].alert({message:t.msg}).then(function(){e.$router.replace({name:"login"})})):l["a"].fail(t.msg)})}}},u=r,h=(a("d869"),a("2877")),d=Object(h["a"])(u,n,c,!1,null,null,null);t["default"]=d.exports},cf2e:function(e,t,a){},d869:function(e,t,a){"use strict";var n=a("cf2e"),c=a.n(n);c.a}}]);